# 데이터베이스 생성 순서

## 개요

노션 데이터베이스를 생성할 때는 관계 설정을 고려하여 올바른 순서로 생성해야 합니다. 이 문서에서는 단계별 생성 순서를 제공합니다.

## 중요 원칙

⚠️ **관계를 설정하기 전에 모든 관련 데이터베이스를 먼저 생성해야 합니다.**

---

## 1단계: 기본 엔티티 생성

다음 순서로 데이터베이스를 생성합니다:

### 1. 프로필 (가장 기본)

**이유**: 다른 모든 데이터베이스에서 참조되므로 가장 먼저 생성

**생성 방법**:
1. 노션에서 새 페이지 생성
2. `/database` 입력하여 데이터베이스 생성
3. 데이터베이스 이름: `프로필`
4. 속성 추가 (자세한 내용은 [테이블별 노션 데이터베이스 설계](./04-database-designs.md) 참고)

### 2. 훈련과정

**이유**: 능력단위의 부모 엔티티

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `훈련과정`
3. 속성 추가

### 3. 능력단위

**이유**: 능력단위요소의 부모 엔티티

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `능력단위`
3. 속성 추가

### 4. 능력단위요소

**이유**: 수행준거의 부모 엔티티

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `능력단위요소`
3. 속성 추가

### 5. 수행준거

**이유**: 평가 점수 상세의 참조 엔티티

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `수행준거`
3. 속성 추가

---

## 2단계: 관계 테이블 생성

다대다 관계를 위한 중간 데이터베이스를 생성합니다:

### 6. 훈련과정-교사 (다대다 관계용)

**이유**: 훈련과정과 교사의 다대다 관계

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `훈련과정-교사`
3. 속성 추가:
   - `훈련과정` (Relation → 훈련과정)
   - `교사` (Relation → 프로필)
   - `생성일` (Created time)

### 7. 훈련과정-학생 (다대다 관계용)

**이유**: 훈련과정과 학생의 다대다 관계

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `훈련과정-학생`
3. 속성 추가:
   - `훈련과정` (Relation → 훈련과정)
   - `학생` (Relation → 프로필)
   - `등록일` (Date)
   - `상태` (Select: active, completed, withdrawn)
   - `생성일` (Created time)

---

## 3단계: 평가 관련 생성

### 8. 평가일정

**이유**: 과제물 제출의 부모 엔티티

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `평가일정`
3. 속성 추가

### 9. 과제물 제출

**이유**: 평가의 참조 엔티티

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `과제물 제출`
3. 속성 추가

### 10. 평가

**이유**: 평가 점수 상세와 서명의 부모 엔티티

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `평가`
3. 속성 추가

### 11. 평가 점수 상세

**이유**: 평가와 수행준거의 중간 엔티티

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `평가 점수 상세`
3. 속성 추가

### 12. 서명

**이유**: 평가의 하위 엔티티

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `서명`
3. 속성 추가

---

## 4단계: 기타 생성

### 13. 사용자 설정

**이유**: 프로필의 1:1 관계

**생성 방법**:
1. 새 데이터베이스 생성
2. 데이터베이스 이름: `사용자 설정`
3. 속성 추가

---

## 5단계: 관계 설정

각 데이터베이스에 관계형 속성을 추가합니다:

### 1. 기본 관계 설정 (일대다)

#### 훈련과정 → 능력단위

1. 능력단위 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `훈련과정`
4. 연결: 훈련과정 데이터베이스
5. 양방향 선택
6. 저장

#### 능력단위 → 능력단위요소

1. 능력단위요소 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `능력단위`
4. 연결: 능력단위 데이터베이스
5. 양방향 선택
6. 저장

#### 능력단위요소 → 수행준거

1. 수행준거 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `능력단위요소`
4. 연결: 능력단위요소 데이터베이스
5. 양방향 선택
6. 저장

#### 능력단위 → 평가일정

1. 평가일정 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `능력단위`
4. 연결: 능력단위 데이터베이스
5. 양방향 선택
6. 저장

#### 평가일정 → 과제물 제출

1. 과제물 제출 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `평가일정`
4. 연결: 평가일정 데이터베이스
5. 양방향 선택
6. 저장

#### 평가일정 → 프로필 (생성자)

1. 평가일정 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `생성자`
4. 연결: 프로필 데이터베이스
5. 양방향 선택
6. 저장

#### 과제물 제출 → 능력단위

1. 과제물 제출 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `능력단위`
4. 연결: 능력단위 데이터베이스
5. 양방향 선택
6. 저장

#### 능력단위 → 평가

1. 평가 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `능력단위`
4. 연결: 능력단위 데이터베이스
5. 양방향 선택
6. 저장

#### 평가 → 평가 점수 상세

1. 평가 점수 상세 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `평가`
4. 연결: 평가 데이터베이스
5. 양방향 선택
6. 저장

#### 수행준거 → 평가 점수 상세

1. 평가 점수 상세 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `수행준거`
4. 연결: 수행준거 데이터베이스
5. 양방향 선택
6. 저장

#### 평가 → 서명

1. 서명 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `평가`
4. 연결: 평가 데이터베이스
5. 양방향 선택
6. 저장

#### 프로필 → 평가 (교사)

1. 평가 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `교사`
4. 연결: 프로필 데이터베이스
5. 단방향 선택
6. 저장

#### 프로필 → 평가 (학생)

1. 평가 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `학생`
4. 연결: 프로필 데이터베이스
5. 단방향 선택
6. 저장

#### 프로필 → 과제물 제출

1. 과제물 제출 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `학생`
4. 연결: 프로필 데이터베이스
5. 양방향 선택
6. 저장

#### 프로필 → 서명

1. 서명 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `서명자`
4. 연결: 프로필 데이터베이스
5. 양방향 선택
6. 저장

#### 프로필 → 사용자 설정

1. 사용자 설정 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `사용자`
4. 연결: 프로필 데이터베이스
5. 양방향 선택
6. 저장

#### 평가 → 과제물 제출 (1:1 관계)

1. 평가 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `과제물`
4. 연결: 과제물 제출 데이터베이스
5. 양방향 선택
6. 저장

**주의**: 이는 1:1 관계이지만, 노션에서는 양방향 관계로 설정합니다. 실제로는 하나의 평가가 하나의 과제물과만 연결됩니다.

### 2. 다대다 관계 설정

#### 훈련과정 ↔ 교사

1. 훈련과정 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `담당 교사`
4. 연결: 훈련과정-교사 데이터베이스
5. 양방향 선택
6. 저장

7. 프로필 데이터베이스 열기
8. 속성 추가 → Relation
9. 이름: `담당 훈련과정`
10. 연결: 훈련과정-교사 데이터베이스
11. 양방향 선택
12. 저장

#### 훈련과정 ↔ 학생

1. 훈련과정 데이터베이스 열기
2. 속성 추가 → Relation
3. 이름: `수강 학생`
4. 연결: 훈련과정-학생 데이터베이스
5. 양방향 선택
6. 저장

7. 프로필 데이터베이스 열기
8. 속성 추가 → Relation
9. 이름: `수강 훈련과정`
10. 연결: 훈련과정-학생 데이터베이스
11. 양방향 선택
12. 저장

### 3. 롤업 속성 추가

관계가 설정된 후 롤업 속성을 추가합니다.

**자세한 내용**: [롤업 및 수식 속성 활용](./06-rollups-formulas.md)

### 4. 수식 속성 추가

롤업이 설정된 후 수식 속성을 추가합니다.

**자세한 내용**: [롤업 및 수식 속성 활용](./06-rollups-formulas.md)

---

## 체크리스트

각 단계를 완료하면 체크하세요:

### 1단계: 기본 엔티티
- [ ] 프로필
- [ ] 훈련과정
- [ ] 능력단위
- [ ] 능력단위요소
- [ ] 수행준거

### 2단계: 관계 테이블
- [ ] 훈련과정-교사
- [ ] 훈련과정-학생

### 3단계: 평가 관련
- [ ] 평가일정
- [ ] 과제물 제출
- [ ] 평가
- [ ] 평가 점수 상세
- [ ] 서명

### 4단계: 기타
- [ ] 사용자 설정

### 5단계: 관계 설정
- [ ] 일대다 관계 설정
- [ ] 다대다 관계 설정
- [ ] 롤업 속성 추가
- [ ] 수식 속성 추가

---

## 다음 단계

이제 다음 문서를 읽어보세요:

1. **[데이터 마이그레이션 가이드](./09-migration-guide.md)** - Supabase에서 노션으로 데이터 이동
2. **[대시보드 페이지 제작 가이드](./10-dashboard-guide.md)** - 대시보드 구성

---

**이전**: [Supabase 단점 보완 방안](./07-supabase-improvements.md)  
**다음**: [데이터 마이그레이션 가이드](./09-migration-guide.md)

